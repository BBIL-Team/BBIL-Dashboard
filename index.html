<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Table</title>
    <style>
        /* Styling the popup modal */
        #popupModal {
            display: none; /* Hidden by default */
            position: fixed; 
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Black background with transparency */
        }

        #popupContent {
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover, .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table, th, td {
            border: 1px solid black;
        }

        th, td {
            padding: 8px;
            text-align: left;
        }

        button {
            padding: 5px;
        }
    </style>

    <script>
        // Function to open the popup modal
        function openPopup() {
            document.getElementById('popupModal').style.display = 'block';
        }

        // Function to close the popup modal
        function closePopup() {
            document.getElementById('popupModal').style.display = 'none';
        }

        // Function to handle removing a task
        function removeTask(employeeName, taskDescription) {
            const confirmRemove = confirm(`Are you sure you want to remove the task: "${taskDescription}" for employee: "${employeeName}"?`);
            if (confirmRemove) {
                // Make a request to the AWS Lambda to remove the task
                fetch(' https://oje3cr7sy2.execute-api.ap-south-1.amazonaws.com/V1/RemoveTask', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        employeeName: employeeName,
                        taskDescription: taskDescription
                    }),
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert("Task removed successfully");
                        location.reload(); // Reload the page to reflect the changes
                    } else {
                        alert("Failed to remove task");
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert("An error occurred while removing the task");
                });
            }
        }
    </script>
</head>
<body>

    <h2>Employee Task List</h2>

    <!-- Button to trigger the task removal popup -->
    <button onclick="openPopup()">Remove Task</button>

    <!-- The popup modal -->
    <div id="popupModal">
        <div id="popupContent">
            <span class="close" onclick="closePopup()">&times;</span>
            <h3>Task List</h3>
            <table border="1">
                <thead>
                    <tr>
                        <th>Employee ID</th>
                        <th>Employee Name</th>
                        <th>Task Description</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Remove</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Example tasks; you would generate these dynamically from your data -->
                    <tr>
                        <td>10005315</td>
                        <td>Surya</td>
                        <td>Task c</td>
                        <td>2024-12-05</td>
                        <td>2024-12-06</td>
                        <td><button onclick="removeTask('John Doe', 'Task A')">❌</button></td>
                    </tr>
                    <tr>
                        <td>10005315</td>
                        <td>Surya</td>
                        <td>Task E</td>
                        <td>2024-06-05</td>
                        <td>2024-07-06</td>
                        <td><button onclick="removeTask('Jane Smith', 'Task B')">❌</button></td>
                    </tr>
		    <tr>
                        <td>10005144</td>
                        <td>Ramita</td>
                        <td>Task A</td>
                        <td>2024-10-10</td>
                        <td>2024-10-11</td>
                        <td><button onclick="removeTask('Jane Smith', 'Task B')">❌</button></td>
                    </tr>
		     <tr>
                        <td>10005144</td>
                        <td>Ramita</td>
                        <td>Task D</td>
                        <td>2024-04-08</td>
                        <td>2024-04-09</td>
                        <td><button onclick="removeTask('Jane Smith', 'Task B')">❌</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</body>
</html>
